!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/scripts",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvasController=t}return i(e,[{key:"setEvents",value:function(){document.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("size-menu");null!==t&&(null===e.target.closest("#size-menu")?t.remove():(console.log(e.target),null!==e.target.closest(".tools-menu__size-container")&&console.log("hi")))})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvasController=t,this.burguerIcon=document.getElementById("burguer-icon"),this.brushIcon=document.getElementById("brush-icon"),this.eraserIcon=document.getElementById("eraser-icon"),this.bucketIcon=document.getElementById("bucket-icon"),this.pickerIcon=document.getElementById("picker-icon"),this.textIcon=document.getElementById("text-icon"),this.colorIcon=document.getElementById("icon-color"),this.clearIcon=document.getElementById("clear-icon")}return i(e,[{key:"setEvents",value:function(){var e=this;this.burguerIcon.addEventListener("click",function(e){}),this.brushIcon.addEventListener("click",function(t){e.openSizeMenus(t,"brush")}),this.eraserIcon.addEventListener("click",function(t){e.openSizeMenus(t,"eraser")})}},{key:"openSizeMenus",value:function(t,n){t.preventDefault(),t.stopPropagation(),e.closeOpenedSizeMenu(),e.removeActiveClass(),"brush"===n?this.activeSizeMenu(this.brushIcon,"brush"):this.activeSizeMenu(this.eraserIcon,"eraser")}},{key:"activeSizeMenu",value:function(e,t){e.childElementCount>1||(e.firstElementChild.classList.add("tools-menu__icon--active"),"brush"===t?this.canvasController.selectBrush():this.canvasController.selectEraser(),this.createSizeMenuElement(e,t))}},{key:"createSizeMenuElement",value:function(e,t){var n=this,i=document.createElement("div");i.id="size-menu",i.classList.add("tools-menu__size-selector"),i.innerHTML=[5,10,15,20,25].map(function(e,i){return'\n    <div class="tools-menu__size-container" data-size="'+e+'">\n        <div class="tools-menu__size--'+(i+1)+" "+(n.canvasController[t].selectedSize===e?"tools-menu__size--active":"")+'"></div>\n    </div>\n    '}).join(""),e.appendChild(i)}}],[{key:"closeOpenedSizeMenu",value:function(){var e=document.getElementById("size-menu");null!==e&&e.remove()}},{key:"removeActiveClass",value:function(){document.querySelectorAll(".tools-menu__icon").forEach(function(e){e.classList.remove("tools-menu__icon--active")})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.socket=io(),this.notificar=!0,this.ultimaNotifacao=new Date}return i(e,[{key:"init",value:function(e){var t=this;this.socket.on("draw",function(n){n.id!==t.socket.id&&(n.path.length<1||e.drawFromSocket(n))})}},{key:"sendDraw",value:function(e,t){this.socket.emit("draw",{path:e,brush:t,id:this.socket.id,notify:this.notificar})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.socket=t,this.pathArray=[]}return i(e,[{key:"stopDrawing",value:function(e,t){e.preventDefault(),t.drawing=!1,this.pathArray.length>0&&(this.socket.sendDraw(this.pathArray,t.brush),this.pathArray=[])}},{key:"clickStartHandler",value:function(e,t){e.preventDefault();var n=t;e.buttons>1||(t.setPositions(e.clientX,e.clientY),t.draw(!0),n.drawing=!0,this.pathArray.push({x:t.currentX,y:t.currentY}),this.socket.sendDraw(this.pathArray,t.brush))}},{key:"touchStartHandler",value:function(e,t){e.preventDefault();var n=t,i=e.changedTouches;if(!(i.length>1)){var r=i[0];t.setPositions(r.clientX,r.clientY),t.draw(!0),n.drawing=!0,this.pathArray.push({x:t.currentX,y:t.currentY}),this.socket.sendDraw(this.pathArray,t.brush)}}},{key:"mouseMoveHandler",value:function(e,t){e.preventDefault(),"picker"!==t.selectedTool&&"bucket"!==t.selectedTool&&t.drawing&&(t.setPositions(e.clientX,e.clientY),t.draw(!1),this.pathArray.push({x:t.currentX,y:t.currentY}),50===this.pathArray.length&&(this.socket.sendDraw(this.pathArray,t.brush),this.pathArray=this.pathArray.slice(49)))}},{key:"toucheMoveHandler",value:function(e,t){if(e.preventDefault(),"picker"!==t.selectedTool&&"bucket"!==t.selectedTool){var n=e.changedTouches;if(!(n.length>1)){var i=n[0];t.drawing&&(t.setPositions(i.clientX,i.clientY),t.draw(!1),this.pathArray.push({x:t.currentX,y:t.currentY}),50===this.pathArray.length&&(this.socket.sendDraw(this.pathArray,t.brush),this.pathArray=this.pathArray.slice(49)))}}}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minBrushSize=5,this.maxBrushSize=25,this.selectedSize=5,this.color="black",this.style="round"}return i(e,[{key:"changeSize",value:function(e){e<this.minBrushSize||e>this.maxBrushSize||(this.selectedSize=e)}},{key:"changeColor",value:function(e){this.color=e}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=o(n(4)),s=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.brush=new r.default,this.eraser=new r.default,this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.canvasContainer=this.canvas.parentElement,this.selectedTool="brush",this.drawing=!1,this.resizeCanvas(),this.initializeContext(),this.setEvents(),this.currentX=null,this.currentY=null,this.previousX=null,this.previousY=null,this.events=new s.default(t)}return i(e,[{key:"setCanvasStyle",value:function(e,t){this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"}},{key:"resizeCanvas",value:function(){this.width=this.canvasContainer.clientWidth,this.height=this.width/16*9,this.setCanvasStyle(this.width,this.height),this.canvasContainer.style.height=this.height+"px"}},{key:"initializeContext",value:function(){this.selectBrush()}},{key:"selectBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.brush;this.context.globalCompositeOperation="source-over",this.context.strokeStyle=e.color,this.context.lineWidth=e.selectedSize,this.context.lineCap=e.style,this.context.lineJoin=e.style}},{key:"selectEraser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eraser;this.context.globalCompositeOperation="destination-out",this.context.strokeStyle=e.color,this.context.lineWidth=e.selectedSize,this.context.lineCap=e.style,this.context.lineJoin=e.style}},{key:"changeBrushSize",value:function(e){this.brush.selectedSize=e,this.selectBrush()}},{key:"changeEraserSize",value:function(e){this.eraser.selectedSize=e,this.selectEraser()}},{key:"selectBucket",value:function(){this.context.globalCompositeOperation="source-over"}},{key:"setPositions",value:function(e,t){this.previousX=this.currentX,this.previousY=this.currentY;var n=this.canvas.getBoundingClientRect(),i=this.canvas.width/n.width,r=this.canvas.height/n.height;this.currentX=(e-n.left)*i,this.currentY=(t-n.top)*r}},{key:"draw",value:function(e){if("bucket"!==this.selectedTool)"picker"!==this.selectedTool?(this.context.beginPath(),e||this.context.moveTo(this.previousX,this.previousY),this.context.lineTo(this.currentX,this.currentY),this.context.stroke()):this.getColor();else{var t=[this.currentX,this.currentY],n=this.context.getImageData(this.currentX,this.currentY,1,1).data,i=this.brush.color;floodFill(this.context,t,n,i)}}},{key:"drawFromSocket",value:function(e){if(this.selectBrush(e.brush),this.context.moveTo(e.path[0].x,e.path[0].y),1===e.path.length)return this.context.lineTo(e.path[0].x,e.path[0].y),void this.context.stroke();for(var t=1;t<e.path.length;t+=1)this.context.lineTo(e.path[t].x,e.path[t].y);this.context.stroke(),this.selectBrush()}},{key:"getColor",value:function(){var e=this.context.getImageData(this.currentX,this.currentY,1,1).data;e[0],e[1],e[2],e[3]}},{key:"setEvents",value:function(){var e=this;this.canvas.addEventListener("mousedown",function(t){e.events.clickStartHandler(t,e)}),this.canvas.addEventListener("touchstart",function(t){e.events.touchStartHandler(t,e)}),this.canvas.addEventListener("mouseup",function(t){e.events.stopDrawing(t,e)}),this.canvas.addEventListener("mouseout",function(t){e.events.stopDrawing(t,e)}),this.canvas.addEventListener("touchend",function(t){e.events.stopDrawing(t,e)}),this.canvas.addEventListener("touchcancel",function(t){e.events.stopDrawing(t,e)}),this.canvas.addEventListener("mousemove",function(t){e.events.mouseMoveHandler(t,e)}),this.canvas.addEventListener("touchmove",function(t){e.events.toucheMoveHandler(t,e)})}}]),e}();t.default=a},function(e,t,n){"use strict";var i=a(n(5)),r=a(n(2)),s=a(n(1)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var c=new r.default,u=new i.default(c),l=new o.default(u);new s.default(u).setEvents(),u.selectBrush(),l.setEvents(),c.init(u)}]);